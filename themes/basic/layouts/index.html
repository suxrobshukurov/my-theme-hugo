{{define `main`}}
{{$todayYear := now.Format "2006"}}
<main class="main">
  <div class="container">
    <div class="block-with-sidebar reverse">
      <div class="content flex">
        <div class="content-block content-text">
          {{ with .Params.H1 }}
          <h1 class="mb-0">{{.}}</h1>
          {{ end }}
          <p>
            {{ with .Content }}
          <div class="toc-container">
            <div class="toc-title">{{i18n "page-nav"}}:<span class="show-toc" data-show="Show"
                data-hide="Hide">[Show]</span>
            </div>
            <div class="toc-list-wrap" id="page-navigation"></div>
          </div>
          {{ end }}
          {{ with .Params.Subtitle }}
          {{. | safeHTML}}
          {{ end }}
        </div>
      </div>
      {{ partial "sidebar/casino.html" . }}
    </div>
  </div>
  <div class="white-block">
    <div class="container">
      <div class="block-with-sidebar">
        {{ partial "sidebar/software.html" . }}
        {{$slots := where .Site.RegularPages "Type" "slots"}}
        {{$casino := shuffle (where site.RegularPages "Type" "in" "casino") }}
        {{ if or $slots $casino }}
        <div class="content flex">
          <div class="content-block">
            <div class="title-with-btn">
              {{ with i18n "top-slot" (dict "Date" $todayYear ) }}
              <h2 class="block-title">{{. }}</h2>
              {{ end }}
              {{ with $btnText := i18n "see-all" }}
              {{ with $.Site.GetPage "slots" }}
              <a href="{{ .Permalink }}" class="btn-more">{{$btnText}}</a>
              {{ end }}
              {{ end }}
            </div>
            <div class="rows slots-list">
              {{ range $item := $slots.ByWeight }}
              {{ if $item.Params.Home }}
              {{ partial "parts/slot-card.html" . }}
              {{ end }}
              {{ end }}
            </div>
            {{ with i18n "top-casino" }}
            <h2>{{.}}</h2>
            {{ end }}
            {{ if $casino }}
            <div class="table-casinos">
              <div class="table-head">
                <div class="head-title">{{i18n "online-casino"}}</div>
                <div class="head-rating">{{i18n "rating"}}</div>
                <div class="head-bonus">{{i18n "welcome-bonus"}}</div>
                <div class="head-btns"></div>
              </div>
              <div class="table-body">
                {{ range $item :=sort $casino ".Params.rating" "desc" }}
                {{ if $item.Params.home}}
                {{ partial "parts/casino-item-welcome.html" . }}
                {{ end }}
                {{ end }}
              </div>
            </div>
            {{ end }}

          </div>
        </div>
        {{ end }}

      </div>
    </div>
  </div>
  {{ if .Content }}
  <div class="container">
    <div class="content-block">
      {{.Content}}

    </div>
  </div>
  {{ end }}

</main>
{{end}}
